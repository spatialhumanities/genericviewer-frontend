<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src&#x2F;BasePanel.js - Pundit</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.8.0pr2&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.8.0pr2&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="http:&#x2F;&#x2F;thepund.it&#x2F;assets&#x2F;img&#x2F;pundit_500.png" title="Pundit"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: PUNDIT Project 0.12-Pumpkin</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/pundit.annotators.AnnotatorsBase.html">pundit.annotators.AnnotatorsBase</a></li>
            
                <li><a href="..&#x2F;classes/pundit.annotators.AnnotatorsConductor.html">pundit.annotators.AnnotatorsConductor</a></li>
            
                <li><a href="..&#x2F;classes/pundit.annotators.FakeAnnotator.html">pundit.annotators.FakeAnnotator</a></li>
            
                <li><a href="..&#x2F;classes/pundit.annotators.TextFragmentAnnotator.html">pundit.annotators.TextFragmentAnnotator</a></li>
            
                <li><a href="..&#x2F;classes/pundit.authenticatedRequests.html">pundit.authenticatedRequests</a></li>
            
                <li><a href="..&#x2F;classes/pundit.baseComponent.html">pundit.baseComponent</a></li>
            
                <li><a href="..&#x2F;classes/pundit.BasePanel.html">pundit.BasePanel</a></li>
            
                <li><a href="..&#x2F;classes/pundit.CommentTag.html">pundit.CommentTag</a></li>
            
                <li><a href="..&#x2F;classes/pundit.CommentTagPanel.html">pundit.CommentTagPanel</a></li>
            
                <li><a href="..&#x2F;classes/pundit.Configuration.html">pundit.Configuration</a></li>
            
                <li><a href="..&#x2F;classes/pundit.contextualMenu.html">pundit.contextualMenu</a></li>
            
                <li><a href="..&#x2F;classes/pundit.DataTxt.html">pundit.DataTxt</a></li>
            
                <li><a href="..&#x2F;classes/pundit.DbpediaSpotlight.html">pundit.DbpediaSpotlight</a></li>
            
                <li><a href="..&#x2F;classes/pundit.FastTextHandler.html">pundit.FastTextHandler</a></li>
            
                <li><a href="..&#x2F;classes/pundit.ImageAnnotationPanel.html">pundit.ImageAnnotationPanel</a></li>
            
                <li><a href="..&#x2F;classes/pundit.Init.html">pundit.Init</a></li>
            
                <li><a href="..&#x2F;classes/pundit.ItemContainerManager.html">pundit.ItemContainerManager</a></li>
            
                <li><a href="..&#x2F;classes/pundit.KorboBasketSelector.html">pundit.KorboBasketSelector</a></li>
            
                <li><a href="..&#x2F;classes/pundit.myPundit.html">pundit.myPundit</a></li>
            
                <li><a href="..&#x2F;classes/pundit.NotebookManager.html">pundit.NotebookManager</a></li>
            
                <li><a href="..&#x2F;classes/pundit.PageHandler.html">pundit.PageHandler</a></li>
            
                <li><a href="..&#x2F;classes/pundit.Previewer.html">pundit.Previewer</a></li>
            
                <li><a href="..&#x2F;classes/pundit.RecognizerPanel.html">pundit.RecognizerPanel</a></li>
            
                <li><a href="..&#x2F;classes/pundit.ResourcesPanel.html">pundit.ResourcesPanel</a></li>
            
                <li><a href="..&#x2F;classes/pundit.selectors.BibServerSelector.html">pundit.selectors.BibServerSelector</a></li>
            
                <li><a href="..&#x2F;classes/pundit.selectors.DBPediaSelector.html">pundit.selectors.DBPediaSelector</a></li>
            
                <li><a href="..&#x2F;classes/pundit.selectors.EuropeanaSelector.html">pundit.selectors.EuropeanaSelector</a></li>
            
                <li><a href="..&#x2F;classes/pundit.selectors.FreebaseSelector.html">pundit.selectors.FreebaseSelector</a></li>
            
                <li><a href="..&#x2F;classes/pundit.selectors.SelectorBase.html">pundit.selectors.SelectorBase</a></li>
            
                <li><a href="..&#x2F;classes/pundit.selectors.VocabSelector.html">pundit.selectors.VocabSelector</a></li>
            
                <li><a href="..&#x2F;classes/pundit.selectors.WordnetSelector.html">pundit.selectors.WordnetSelector</a></li>
            
                <li><a href="..&#x2F;classes/pundit.TripleComposer.html">pundit.TripleComposer</a></li>
            
                <li><a href="..&#x2F;classes/pundit.XpointersHelper.html">pundit.XpointersHelper</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/pundit.html">pundit</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src&#x2F;BasePanel.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x2F;**
    Provides the base GUI a of floating panel. Different parameters 
    can be specified to enable draggability and preview. Basic methods can be inherited 
    to extend it features
    @class pundit.BasePanel
    @extends pundit.baseComponent
    @constructor
    @module pundit
    @param options {object} See object properties
 *&#x2F;
dojo.provide(&quot;pundit.BasePanel&quot;);
dojo.declare(&quot;pundit.BasePanel&quot;, pundit.BaseComponent, {

    constructor:function(options){
        var self = this;
        
        self.log(&#x27;Base Panel Contructor&#x27;);
        
        self.inShowing = false;
        
        &#x2F;&#x2F; TODO: move these property out, and declare+init them directly 
        &#x2F;&#x2F; into an {opts} field .. ? :)
        
        &#x2F;**
            The name of the panel used to create a unique id
            @property name
            @type String
        **&#x2F;
        self.name = options.name;

        &#x2F;**
            The title of the panel 
            @property title
            @type String
        **&#x2F;
        self.title = options.title || &#x27;Panel&#x27;;

        &#x2F;**
            if set to true it enable the panel to be dragged
            @property drag
            @type String
        **&#x2F;
        self.drag = options.drag || false; 

        &#x2F;**
            if set to true enable the preview visualization (
            otherwise the normal preview (in Pundit Window) is used
            assigned explicitly dojo&#x27;s &#x27;declaredClass&#x27; field will be used.
            @property preview
            @type String
        **&#x2F;
        self.preview = options.preview || false;
        

        self.width = options.width || &#x27;400&#x27;;
        self.height = options.height;
        
        self.initBaseHTML();
        
        &#x2F;&#x2F;Adjust width and height of the container
        dojo.style(dojo.query(&#x27;#&#x27; + self._id + &#x27; ul.pundit-fp-content-list&#x27;)[0], {
            width:  parseInt(self.width) +  &#x27;px&#x27;
        });
        if (typeof self.height !== &#x27;undefined&#x27;){
            dojo.style(dojo.query(&#x27;#&#x27; + self._id + &#x27; ul.pundit-fp-content-list&#x27;)[0], {
                height: self.height + &#x27;px&#x27;
            });
        }
            
        
        dojo.style(dojo.query(&#x27;#&#x27; + self._id + &#x27; .pundit-fp-content-container&#x27;)[0], &#x27;width&#x27;, self.width - 10 + &#x27;px&#x27;);

        
        if (self.preview){
            self.showPreview = function(uri){
                var self = this;
                previewer.show(uri, &#x27;#&#x27; + self._id + &#x27; .pundit-fp-preview&#x27;);
                dojo.addClass(dojo.query(&#x27;#&#x27; + self._id+ &#x27; .pundit-fp-content-list&#x27;)[0], &#x27;pundit-preview&#x27;);
                dojo.style(dojo.query(&#x27;#&#x27; + self._id + &#x27; ul.pundit-fp-content-list&#x27;)[0], {
                    width:  parseInt(self.width) + parseInt(250) + &#x27;px&#x27; 
                });
                
&#x2F;&#x2F;                dojo.style(dojo.query(&#x27;#&#x27; + self._id + &#x27; pundit-fp-preview-list&#x27;)[0], {
&#x2F;&#x2F;                    left:  parseInt(self.width + 30) 
&#x2F;&#x2F;                });
                
                
                var h = dojo.position(dojo.query(&#x27;#&#x27; + self._id+ &#x27; .pundit-fp-content-list&#x27;)[0]).h;
                dojo.style(dojo.query(&#x27;#&#x27; + self._id+ &#x27; .pundit-fp-preview&#x27;)[0], &#x27;height&#x27;, h +&#x27;px&#x27;);
            };
            self.hidePreview= function(){
                var self = this;
                dojo.removeClass(dojo.query(&#x27;#&#x27; + self._id+ &#x27; .pundit-fp-content-list&#x27;)[0], &#x27;pundit-preview&#x27;);
                dojo.style(dojo.query(&#x27;#&#x27; + self._id + &#x27; ul.pundit-fp-content-list&#x27;)[0], {
                    width:  parseInt(self.width) + &#x27;px&#x27; 
                });
                &#x2F;&#x2F;dojo.style(dojo.query(&#x27;#&#x27; + self._id+ &#x27; .pundit-fp-content-list&#x27;)[0], &#x27;width&#x27;, &#x27;400px&#x27;);
            };
        }
        
        self.initBaseBehaviors();
    },
    initBaseHTML:function(){
        var self = this;
        self.log(&#x27;Init HTML Base Panel&#x27;);
        if (typeof self.name !== &#x27;undefined&#x27;)
            self._id = &#x27;pundit-fp-&#x27; + self.name;
        else
            self._id = &#x27;pundit-fp-&#x27; + Math.rand(100);
        
        var c =&#x27;&lt;div id=&quot;&#x27; + self._id + &#x27;&quot; class=&quot;pundit-base pundit-fp pundit-hidden pundit-disable-annotation pundit-stop-wheel-propagation&quot;&gt;&#x27;;
        c += &#x27;  &lt;div class=&quot;pundit-fp-header&quot;&gt;&lt;span class=&quot;pundit-fp-title&quot;&gt;&#x27; + self.title + &#x27;&lt;&#x2F;span&gt;&lt;span class=&quot;pundit-fp-close pundit-icon-close&quot;&gt;&lt;&#x2F;span&gt;&lt;&#x2F;div&gt;&#x27;;
        c += &#x27;  &lt;ul class=&quot;pundit-fp-content-list pundit-horizontal-list&quot;&gt;&#x27;;
        c += &#x27;      &lt;li&gt;&#x27;;
        c += &#x27;          &lt;div class=&quot;pundit-fp-content-container pundit-fp-container&quot;&gt;&#x27;;
        c += &#x27;          &lt;&#x2F;div&gt;&#x27;;
        c += &#x27;      &lt;&#x2F;li&gt;&#x27;;
        c += &#x27;      &lt;li class=&quot;pundit-fp-preview-list pundit-stop-wheel-propagation fillheight&quot;&gt;&#x27;;
        c += &#x27;          &lt;div class=&quot;pundit-fp-container fillheight pundit-stop-wheel-propagation&quot;&gt;&#x27;;
        c += &#x27;              &lt;span id=&quot;&#x27; + self._id + &#x27;-preview-hide&quot; style=&quot;cursor: pointer&quot;&gt;- [hide preview]&lt;&#x2F;span&gt;&lt;div id =&quot;&#x27; + self._id + &#x27;-preview&quot; class=&quot;pundit-fp-preview pundit-moreinfo-panel pundit-stop-wheel-propagation fillheight&quot;&gt;&lt;&#x2F;div&gt;&#x27;;
        c += &#x27;          &lt;&#x2F;div&gt;&#x27;;
        c += &#x27;      &lt;&#x2F;li&gt;&#x27;;
        c += &#x27;  &lt;&#x2F;ul&gt;&#x27;;
        c += &#x27;&lt;&#x2F;div&gt;&#x27;;
        
        dojo.query(&#x27;body&#x27;).append(c);
    },
    
    initBaseBehaviors:function(){
        var self= this;
        
        if (self.drag){
            
            var hider = dojo.byId(self._id + &#x27;-preview-hide&#x27;);
            var prev = dojo.byId(self._id + &#x27;-preview&#x27;);
            dojo.connect(hider, &#x27;onclick&#x27;, function (evt) {
                if (prev.getAttribute(&#x27;style&#x27;) !== &#x27;visibility: hidden; cursor: pointer&#x27;) {
                    prev.setAttribute(&#x27;style&#x27;,&#x27;visibility: hidden; cursor: pointer&#x27;);    
                    hider.innerHTML = &#x27;+ [show preview]&#x27;
                } else {
                    prev.setAttribute(&#x27;style&#x27;,&#x27;&#x27;);
                    hider.innerHTML = &#x27;- [hide preview]&#x27;
                }
                
            });
            
            dojo.connect(dojo.query(&#x27;#&#x27; + self._id+ &#x27; .pundit-fp-header&#x27;)[0], &#x27;onmousedown&#x27;, function (e){
                &#x2F;&#x2F;dojo.stopEvent(e);
                self.moving = true;
                self.start = {
                    left : dojo.style(self._id, &#x27;left&#x27;),
                    top : dojo.style(self._id, &#x27;top&#x27;),
                    x: e.pageX,
                    y: e.pageY
                };
            });
        
            dojo.connect(window, &#x27;onmousemove&#x27;, function(e){
                if (self.moving === true) {

                    if (e.clientY &gt; 0 &amp;&amp; e.clientY &lt; window.innerHeight - 10){
                        dojo.stopEvent(e);
                        dojo.style(self._id, &#x27;left&#x27;, self.start.left - self.start.x + e.pageX + &#x27;px&#x27;);
                        dojo.style(self._id, &#x27;top&#x27;, self.start.top - self.start.y + e.pageY + &#x27;px&#x27;);
                    }
                }
            });
            dojo.connect(window, &#x27;onmouseup&#x27;, function(e){
                self.moving = false;
            });
        }
        
        dojo.connect(dojo.query(&#x27;#&#x27; + self._id+ &#x27; .pundit-fp-close&#x27;)[0], &#x27;onclick&#x27;, function(){
           self.hide();
        });
        
        dojo.behavior.apply();
    },
    &#x2F;**
    * @method hide
    * @description Hide the panel.
    *&#x2F;
    hide: function(){
        var self = this;
        dojo.style(dojo.query(&#x27;#&#x27; + self._id + &#x27;.pundit-fp&#x27;)[0], &#x27;opacity&#x27;, 0);
        &#x2F;&#x2F;Destroy the container once the animation has completed
        &#x2F;&#x2F;Destroy or just make the block display none
        self.inShowing = false;
        self.hideTimeout = setTimeout(function(){
            dojo.addClass(self._id, &#x27;pundit-hidden&#x27;);
            self.hidePreview();
        },1000);
        
    },
    &#x2F;**
    * @method show
    * @description Show the panel.
    *&#x2F;
    show: function(x,y){
        var self = this;
        if (self.isVisible())
            return;
        self.inShowing = true;
        clearTimeout(self.hideTimeout);
        dojo.removeClass(self._id, &#x27;pundit-hidden&#x27;);
        if (typeof x !== &#x27;undefined&#x27; &amp;&amp; typeof y !== &#x27;undefined&#x27;){
            dojo.style(&#x27;pundit-fp-notebook-sharePanel&#x27;,{
                left:x,
                top:y}
            );
        }
        setTimeout(function(){dojo.style(dojo.query(&#x27;#&#x27; + self._id + &#x27;.pundit-fp&#x27;)[0], &#x27;opacity&#x27;,1);},10);
        
        &#x2F;&#x2F;dijit.focus(dojo.byId(&#x27;pundit-ctp-comment-input&#x27;));
    },
    
    &#x2F;**
    * @method isVisible
    * @description Check if the panel is visible
    * @return {boolean} True if it is visible, false otherwise
    *&#x2F;
    isVisible:function(){
      return this.inShowing;
    },
    
    &#x2F;**
    * @method getPosition
    * @description Get the current position of the panel
    * @return {object} An object containing the position of the panel (x,y,w,h)
    *&#x2F;
    getPosition:function(){
        return dojo.position(this._id);
    },
    
    &#x2F;**
    * @method showPreview
    * @description shows the preview of the item. Depending on the parameter 
    * (preview) passed to the component the preview is shown inside the panel 
    * (preview = true) or in the Pundit Window. (preview = false)
    * @param uri {string} The uri of the item to preview 
    *&#x2F;
    showPreview: function(uri){
        var self = this;
        previewer.show(uri);
    },
    &#x2F;**
    * @method hidePreview
    * @description Hide the preview panel.
    *&#x2F;
    hidePreview: function(){
        var self = this;
        dojo.removeClass(dojo.query(&#x27;#&#x27; + self._id+ &#x27; li.pundit-fp-preview-list&#x27;)[0], &#x27;pundit-preview&#x27;);
    },
    &#x2F;**
    * @method addHTMLContent
    * @description Add html content to the panel content container.
    * @param uri {string} The HTML to be added to create the content of the panel
    *&#x2F;
    addHTMLContent: function(html){
        var self = this;
        dojo.query(&#x27;#&#x27; + self._id + &#x27; .pundit-fp-content-container&#x27;).append(html);
    },
    &#x2F;**
    * @method emptyContent
    * @description Remove all the HTML content of the panel
    *&#x2F;
    emptyContent:function(){
        var self = this;
        dojo.empty(dojo.query(&#x27;#&#x27; + self._id + &#x27; .pundit-fp-content-container&#x27;)[0]);
    }
});

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
